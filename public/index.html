<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MiniChat</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

</head>
<body class="container">
    <h1>Minichat</h1>

    <hr />
    <form id="form">
        <div class="row">
            <div class="col-8">
                <input type="text" id="message" class="form-control">
            </div>
            <div class="col-4">
                <button type="submit" class="btn btn-info" id="btn-send">Enviar</button>
            </div>
        </div>
        <div class="row">
            <div class="col-8">
                <ul class="" id="messages" class="mt-2">
                    
                </ul>
            </div>
        </div>

    </form>





    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.0.3/socket.io.js" integrity="sha512-Jr0UIR/Q8MUX+93zjDOhuDUKLqJZObtwpkLJQcR9qMaLgL0thet39IORuavUaZFkZ8a4ktrUsKPM9mf5LWMduA==" crossorigin="anonymous"></script>
    <script>
        const socket = io("https://react-socket-server-jp.herokuapp.com/")

        const form = document.querySelector("#form")
        const message = document.querySelector("#message")
        const messages = document.querySelector("#messages")

        form.addEventListener("submit",(e)=>{
            e.preventDefault()
            const msg = message.value

            socket.emit("message",{texto:msg})
        })

        socket.on("message",(message)=>{
            console.log('message',message)
        })
        socket.on("message-from-server",(message)=>{

            messages.innerHTML+=`<li>${message.texto}</li>`

            console.log('message-from-server',message)
        })
        

    </script>

</body>
</html>